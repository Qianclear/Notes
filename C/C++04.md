# 第11章

## 输出流

**最重要的三个输出流**

> - ```ostream```
> - ```ofstream```
> - ```ostringstream```

**预定义好的输出流对象**

> - ```cout```标准输出
> - ```cerr```标准错误输出，没有缓冲，发送给它的内容立即被输出
> - ```clog```类似于```cerr```，但是有缓冲，缓冲区满是被输出

**构造输出流对象**

- ```ofstream```类支持磁盘文件输出

- 如果在构造函数中指定一个文件名 ，当构造这个文件时该文件是自动打开的
  ```ofstream myFile(" filename");```

- 可以在调用默认构造函数之后使用open成员函数打开文件

  ```ofstream myFile; //声明-个静态文件输出流对象```

  ```myFile.open("filename"); //打开文件，使流对象与文件建立联系```

- 在构造对象或用open打开文件时可以指定模式

  ```ofstream myFile(" filename", ios_base:out | ios_base::binary);```

  > 不太懂输出模式，只知道用|（或）来同时使用多个模式

**文件输出流成员函数的三种类型**

+ 与操纵符等价的成员函数
+ 执行非格式化写操作的成员函数
+ 其它修改流状态且不同于操纵符或插入运算符的成员函数

**文件输出流成员函数**

- ```open```函数：把流与一个特定的磁盘文件关联起来;    需要指定打开模式。
- ```put```函数：把一个字符写到输出流中。
- ```write```函数：将内存中的一块内容写到-个文件输出流中。
- ```seekp```和```tellp```函数：操作文件流的内部指针。
- ```close```函数：关闭与一个文件输出流关联的磁盘文件。
- 错误处理函数：在写到一个流时进行错误处理。

**操纵符( manipulator )**

- 插入运算符与操纵符一起工作

  控制输出格式。

- 很多操纵符都定义在```ios_base```类中(如```hex()```、```<iomanip> ```头文件(如```setprecision()```。

- 控制输出宽度
  在流中放入```setw```操纵符或调用width成员函数为每 个项指定输出宽度。

- ```setw```和```width```仅影响紧随其后的输出项，但其它流格式操纵符保持
  有效直到发生改变。

- ```dec、oct和hex```操纵符设 置输入和输出的默认进制。

### setiosflags的参数

| 操作符              | 作用                                                         |
| :------------------ | ------------------------------------------------------------ |
| ios_base::skipws    | 在输入中跳过空白。                                           |
| ios_base::left      | 左对齐值，用填充字符填充右边。                               |
| ios_base::right     | 右对齐值，用填充字符填充左边(默认对齐方式)。                 |
| ios_base::internal  | 在规定的宽度内，指定前缀符号之后，数值之前，插入指定的填充字符。 |
| ios_base::dec       | 以十进制形式格式化数值(默认进制)。                           |
| ios_base::oct       | 以八进制形式格式化数值。                                     |
| ios_base::hex       | 以十六进制形式格式化数值。                                   |
| ios_base::showbase  | 插入前缀符号以表明整数的数制。                               |
| ios_base::showpoint | 对浮点数值显示小数点和尾部的0。                              |

| ios_base::uppercase  | 对于十六进制数值显示大写字母A到F，对于科学格式显示大写字母E |
| :------------------- | ----------------------------------------------------------- |
| ios_base::showpos    | 对于非负数显示正号（“ + ”）                                 |
| ios_base::scientific | 以科学计数法显示浮点数值                                    |
| ios_base::fixed      | 以定点格式显示浮点数值(没有指数部分)                        |
| ios_base::unitbuf    | 在每次插入之后转储并清除缓冲区内容。                        |

```
代码演示：
#include<iostream>
#include<iomanip>//是setiosflags操作符的头文件
#include<string>
using namespace std;
cout << setiosflags(ios_base::fixed);//①
int main(){
	double values[] = {1.23,35.36,653.7,4358.24};
	string names[] = {"Zoot","Jimmy","AL","Stan"};
	for(int i = 0;i< 4;i++){
	cout << setiosflags(ios_base::left)//表示设置左对齐
	<< setw(6)//表示设置宽度
	<<names[i]
	<<resetiosflags(ios_base::left)//表示重新设置为右对齐
	<<setw(10) << setprecision(1) // 正常情况表示精度为1，但是当有①存在时
	                              // 表示保留小数点后1位有效数字
	<< values[i] << endl;
	}
	return 0;
}
```

### 二进制文件流

使用```ofstream```构造函数中的模式参量指定二进制输出模式 ;
以通常方式构造一个流 ，然后使用```setmode```成员函数，在文件打开后改变模式;
通过二进制文件输出流对象完成输出。

## 输入流

```istream```类最适合用于顺序文本模式输入。```cin```是例子

```ifstream```类支出磁盘文件输入

```istringstream```

### 构造输入流对象

- 如果在构造函数中指定一个文件名 ， 在构造该对象时该文件便自动打开。
  ```ifstream myFile("filename");```

- 在调用默认构造函数之后使用open函数来打开文件。
  ```ifstream myFile; //建立一个文件流对象```
  ```myFile.open(" filename"); //打开文件" filename"```

- 打开文件时可以指定模式
  ```ifstream myFile("filename", ios. base:in | ios_ base:binary);```

### 使用提取运算符从文本文件输入

+ 提取运算符(> > )对于所有标准C + +数据类型都是预先设计好的。

+ 是从一个输入流对象获取字节最容易的方法。

+ ```ios```类中的很多操纵符都可以应用于输入流。但是只有少数几个对输入流对象具有实际影响，其中最重要的是进制操纵符```dec```、```oct```和```hex```。

### 输入流相关函数

+ open函数把该流与一个特定磁盘文件相关联。

+ get函数的功能与提取运算符( >> )很相像，主要的不同点是get函数在读入数据时包括空白字符。

+ ```getline```的功能是从输入流中读取多个字符，并且允许指定输入终止字符，读取完成后，从读取的内容中删除终止字符。 

+ read成员函数从一个文件读字节到一个指定的内存区域,由长度参数确定要读的字节数。当遇到文件结束或者在文本模式文件中遇到文件结束标记字符时结束读取。

+ ```seekg```函数用来设置文件输入流中读取数据位置的指针。

+ ```tellg```函数返回当前文件读指针的位置。

+ ```close```函数关闭与-个文件输入流关联的磁盘文件。

